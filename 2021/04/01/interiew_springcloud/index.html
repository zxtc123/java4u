<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta charset="UTF-8">
  <meta 
    name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta 
    http-equiv="X-UA-Compatible" 
    content="ie=edge">
  <meta 
    name="theme-color" 
    content="#fff" 
    id="theme-color">
  <meta 
    name="description" 
    content="Snail">
  <link 
    rel="icon" 
    href="/java4u/img/snail.png">
  <title>springcloud</title>
  
    
      <meta 
        property="og:title" 
        content="springcloud">
    
    
      <meta 
        property="og:url" 
        content="https://zxtc123.github.io/java4u/2021/04/01/interiew_springcloud/index.html">
    
    
      <meta 
        property="og:img" 
        content="/java4u/img/1.e3a1f41f.gif">
    
    
    
      <meta 
        property="og:type" 
        content="article">
      <meta 
        property="og:article:published_time" 
        content="2021-04-01">
      <meta 
        property="og:article:modified_time" 
        content="2024-03-11">
      <meta 
        property="og:article:author" 
        content="Zhao Xin">
      
        
          <meta 
            property="og:article:tag" 
            content="学习">
        
      
    
  
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
    function loadCSS(href, data, attr) {
      var sheet = document.createElement('link');
      sheet.ref = 'stylesheet';
      sheet.href = href;
      sheet.dataset[data] = attr;
      document.head.appendChild(sheet);
    }
    function changeCSS(cssFile, data, attr) {
      var oldlink = document.querySelector(data);
      var newlink = document.createElement("link");
      newlink.setAttribute("rel", "stylesheet");
      newlink.setAttribute("href", cssFile);
      newlink.dataset.prism = attr;
      document.head.replaceChild(newlink, oldlink);
    }
  </script>
  
    
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
  </script>
  
    <script>
      var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
        document.getElementById('theme-color').dataset.mode = getCssMediaQuery();
      }
    };
    setDarkmode();
    </script>
  
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  
    <link rel="preload" href="/java4u/js/lib/lightbox/baguetteBox.min.js" as="script">
    <link rel="preload" href="/java4u/js/lib/lightbox/baguetteBox.min.css" as="style" >
  
  
    <link rel="preload" href="/java4u/js/lib/lozad.min.js" as="script">
  
  
  
  
    
    <link rel="prefetch" href="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js" as="script">
  
  
  
  
  <link rel="stylesheet" href="/java4u/css/main.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">
  
    <link rel="stylesheet" href="/java4u/js/lib/lightbox/baguetteBox.min.css">
  
<meta name="generator" content="Hexo 6.1.0"></head>

  <body>
    <div class="wrapper">
       
      <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
        <img 
          class="navbar-logo-img"
          width="32"
          height="32"
          src="/java4u/img/snail.png" 
          alt="blog logo">
      
      <span class="navbar-logo-dsc">Snail</span>
    </span>
  </div>
  <div class="navbar-menu">
    
      <a 
        href="/java4u/" 
        class="navbar-menu-item">
        
          首页
        
      </a>
    
      <a 
        href="/java4u/archives" 
        class="navbar-menu-item">
        
          归档
        
      </a>
    
      <a 
        href="/java4u/tags" 
        class="navbar-menu-item">
        
          标签
        
      </a>
    
      <a 
        href="/java4u/categories" 
        class="navbar-menu-item">
        
          分类
        
      </a>
    
      <a 
        href="/java4u/about" 
        class="navbar-menu-item">
        
          关于
        
      </a>
    
      <a 
        href="/java4u/links" 
        class="navbar-menu-item">
        
          友链
        
      </a>
    
    <a 
      class="navbar-menu-item darknavbar" 
      id="dark">
      <i class="iconfont icon-weather"></i>
    </a>
    <a 
      class="navbar-menu-item searchnavbar" 
      id="search">
      <i 
        class="iconfont icon-search" 
        style="font-size: 1.2rem; font-weight: 400;">
      </i>
    </a>
  </div>
</nav> 
      
      <div 
        id="local-search" 
        style="display: none">
        <input
          class="navbar-menu-item"
          id="search-input"
          placeholder="请输入搜索内容..." />
        <div id="search-content"></div>
      </div>
      
      <div class="section-wrap">
        <div class="container">
          <div class="columns">
            <main class="main-column">
<article class="card card-content">
  <header>
    <h1 class="post-title">
      springcloud
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2021-03-31T16:00:00.000Z">
      <i 
        class="iconfont icon-calendar" 
        style="margin-right: 2px;">
      </i>
      <span>2021-04-01</span>
    </time>
    
      <span class="dot"></span>
      
        <a 
          href="/java4u/categories/%E9%9D%A2%E8%AF%95/" 
          class="post-meta-link">
          面试
        </a>
      
    
    
      <span class="dot"></span>
      <span>3.8k 字</span>
    
  </div>
  
    <div 
      class="post-meta post-show-meta" 
      style="margin-top: -10px;">
      <div style="display: flex; align-items: center;">
        <i 
          class="iconfont icon-biaoqian" 
          style="margin-right: 2px; font-size: 1.15rem;">
        </i>
        
          
          <a 
            href="/java4u/tags/%E5%AD%A6%E4%B9%A0/" 
            class="post-meta-link">
            学习
          </a>
        
      </div>
    </div>
  
  </header>
  <div 
    id="section" 
    class="post-content">
    <h1 id="微服务–springcloud"><a href="#微服务–springcloud" class="headerlink" title="微服务–springcloud"></a>微服务–springcloud</h1><h2 id="1-springcloud和dubbo有哪些区别"><a href="#1-springcloud和dubbo有哪些区别" class="headerlink" title="1.springcloud和dubbo有哪些区别"></a>1.springcloud和dubbo有哪些区别</h2><p>a. Dubbo具有调度、发现、监控、治理等功能，⽀持相当丰富的服务治理能⼒。Dubbo架构下，注册中⼼对等集群，并会缓存服务列表已被数据库失效时继续提供发现功能，本身的服务发现结构有很强的可⽤性与健壮性，⾜够⽀持⾼访问量的⽹站。</p>
<p>b. 虽然Dubbo ⽀持短连接⼤数据量的服务提供模式，但绝⼤多数情况下都是使⽤⻓连接⼩数据量的模式提供服务使⽤的。所以，对于类似于电商等同步调⽤场景多并且能⽀撑搭建Dubbo 这套⽐较复杂环境的成本的产品⽽⾔，Dubbo 确实是⼀个可以考虑的选择。但如果产品业务中由于后台业务逻辑复杂、时间⻓⽽导致异步逻辑⽐较多的话，可能Dubbo 并不合适。同时，对于⼈⼿不⾜的初创产品⽽⾔，这么重的架构维护起来也不是很⽅便。</p>
<p>c. Spring Cloud由众多⼦项⽬组成，如Spring Cloud Config、Spring Cloud Netflix、Spring Cloud Consul 等，提供了搭建分布式系统及微服务常⽤的⼯具，如配置管理、服务发现、断路器、智能路由、微代理、控制总线、⼀次性token、全局锁、选主、分布式会话和集群状态等，满⾜了构建微服务所需的所有解决⽅案。⽐如使⽤Spring Cloud Config 可以实现统⼀配置中⼼，对配置进⾏统⼀管理；使⽤Spring Cloud Netflix 可以实现Netflix 组件的功能 - 服务发现（Eureka）、智能路由（Zuul）、客户端负载均衡（Ribbon）。</p>
<p>d. dubbo的开发难度较⼤，原因是dubbo的jar包依赖问题很多⼤型⼯程⽆法解决。</p>
<p>e. Dubbo 提供了各种 Filter，对于上述中“⽆”的要素，可以通过扩展 Filter 来完善。</p>
<h2 id="2-什么是服务熔断，什么是服务降级"><a href="#2-什么是服务熔断，什么是服务降级" class="headerlink" title="2. 什么是服务熔断，什么是服务降级"></a><strong>2.</strong> 什么是服务熔断，什么是服务降级</h2><p>a. 服务熔断：（为防止系统出现雪崩情况，暂停对服务的调用）</p>
<p>i. 如果检查出来频繁超时，就把consumer调⽤provider的请求，直接短路掉，不实际调⽤，⽽是直接返回⼀个mock的值。</p>
<p>b. 服务降级：（返回一个处理好的错误信息）</p>
<p>i. consumer 端：consumer 如果发现某个provider出现异常情况，⽐如，经常超时(可能是熔断引起的降级)，数据错误，这时，consumer可以采取⼀定的策略，降级provider的逻辑，基本的有直接返回固定的数据。</p>
<p>\2. provider 端：当provider 发现流量激增的时候，为了保护⾃身的稳定性，也可能考虑降级服务。</p>
<p>⽐如，1，直接给consumer返回固定数据，2，需要实时写⼊数据库的，先缓存到队列⾥，异步写⼊数据库。</p>
<h2 id="3-微服务的优缺点"><a href="#3-微服务的优缺点" class="headerlink" title="3. 微服务的优缺点"></a><strong>3.</strong> 微服务的优缺点</h2><p>a. 优点：</p>
<p>i. 单⼀职责：每个微服务仅负责⾃⼰业务领域的功能；</p>
<p>ii. ⾃治：⼀个微服务就是⼀个独⽴的实体，它可以独⽴部署、升级，服务与服务之间通过REST等形式的标准接⼝进⾏通信，并且⼀个微服务实例可以被替换成另⼀种实现，⽽对其它的微服务不产⽣影响。</p>
<p>iii. 逻辑清晰：微服务单⼀职责特性使微服务看起来逻辑清晰，易于维护。</p>
<p>iv. 简化部署：单系统中修改⼀处需要部署整个系统，⽽微服务中修改⼀处可单独部署⼀个服务。</p>
<p>v. 可扩展：应对系统业务增⻓的⽅法通常采⽤横向（Scale out）或纵向（Scale up）的⽅向进⾏扩展。分布式系统中通常要采⽤Scale out的⽅式进⾏扩展。</p>
<p>vi. 灵活组合：</p>
<p>vii. 技术异构：不同的服务之间，可以根据⾃⼰的业务特点选择不通的技术架构，如数据库等。</p>
<p>b. 缺点：</p>
<p>i. 复杂度⾼：</p>
<p>\1. 服务调⽤要考虑被调⽤⽅故障、过载、消息丢失等各种异常情况，代码逻辑更加复杂；</p>
<p>\2. 对于微服务间的事务性操作，因为不同的微服务采⽤了不同的数据库，将⽆法利⽤数据库本身的事务机制保证⼀致性，需要引⼊⼆阶段提交等技术。</p>
<p>ii. 运维复杂：系统由多个独⽴运⾏的微服务构成，需要⼀个设计良好的监控系统对各个微服务的运⾏状态进⾏监控。运维⼈员需要对系统有细致的了解才对够更好的运维系统。</p>
<p>iii. 通信延迟：微服务之间调⽤会有时间损耗，造成通信延迟。</p>
<h2 id="4-列举微服务技术栈"><a href="#4-列举微服务技术栈" class="headerlink" title="4. 列举微服务技术栈"></a><strong>4.</strong> 列举微服务技术栈</h2><p>a. 服务⽹关Zuul</p>
<p>b. 服务注册发现Eureka+Ribbon</p>
<p>a. 服务配置中⼼Apollo</p>
<p>b. 认证授权中⼼Spring Security OAuth2</p>
<p>c. 服务框架Spring Boot</p>
<p>d. 数据总线Kafka</p>
<p>e. ⽇志监控ELK</p>
<p>f. 调⽤链监控CAT</p>
<p>g. Metrics监控KairosDB</p>
<p>h. 健康检查和告警ZMon</p>
<p>i. 限流熔断和流聚合Hystrix&#x2F;Turbine</p>
<h2 id="5-eureka和zookeeper都可以提供服务的注册与发现功能，他们的区别"><a href="#5-eureka和zookeeper都可以提供服务的注册与发现功能，他们的区别" class="headerlink" title="5. eureka和zookeeper都可以提供服务的注册与发现功能，他们的区别"></a><strong>5.</strong> eureka和zookeeper都可以提供服务的注册与发现功能，他们的区别</h2><p>a. Zookeeper保证CP（一致性、分区容错）</p>
<p> 当向注册中⼼查询服务列表时，我们可以容忍注册中⼼返回的是⼏分钟以前的注册信息，但不能接受服务直接down掉不可⽤。也就是说，服务注册功能对可⽤性的要求要⾼于⼀致性。但是zk会出现这样⼀种情况，当master节点因为⽹络故障与其他节点失去联系时，剩余节点会重新进⾏leader选举。问题在于，选举leader的时间太⻓，30 ~ 120s, 且选举期间整个zk集群都是不可⽤的，这就导致在选举期间注册服务瘫痪。在云部署的环境下，因⽹络问题使得zk集群失去master节点是较⼤概率会发⽣的事，虽然服务能够最终恢复，但是漫⻓的选举时间导致的注册⻓期不可⽤是不能容忍的。</p>
<p>b. Eureka保证AP（高可用、分区容错）</p>
<p> Eureka看明⽩了这⼀点，因此在设计时就优先保证可⽤性。Eureka各个节点都是平等的，⼏个节点挂掉不会影响正常节点的⼯作，剩余的节点依然可以提供注册和查询服务。⽽Eureka的客户端在向某个Eureka注册或如果发现连接失败，则会⾃动切换⾄其它节点，只要有⼀台Eureka还在，就能保证注册服务可⽤(保证可⽤性)，只不过查到的信息可能不是最新的(不保证强⼀致性)。除此之外，Eureka还有⼀种⾃我保护机制，如果在15分钟内超过85%的节点都没有正常的⼼跳，那么Eureka就认为客户端与注册中⼼出现了⽹络故障，此时会出现以下⼏种情况：</p>
<p> \1. Eureka不再从注册列表中移除因为⻓时间没收到⼼跳⽽应该过期的服务</p>
<p> \2. Eureka仍然能够接受新服务的注册和查询请求，但是不会被同步到其它节点上(即保证当前节点依然可⽤)</p>
<p> \3. 当⽹络稳定时，当前实例新的注册信息会被同步到其它节点中</p>
<p> 因此， Eureka可以很好的应对因⽹络故障导致部分节点失去联系的情况，⽽不会像zookeeper那样使整个注册服务瘫痪。</p>
<h2 id="6-eureka服务注册与发现原理："><a href="#6-eureka服务注册与发现原理：" class="headerlink" title="6. eureka服务注册与发现原理："></a><strong>6.</strong> eureka服务注册与发现原理：</h2><p>a. 每30s发送⼼跳检测重新进⾏租约，如果客户端不能多次更新租约，它将在90s内从服务器注册中⼼移除。</p>
<p>b. 注册信息和更新会被复制到其他Eureka 节点，来⾃任何区域的客户端可以查找到注册中⼼信息，每30s发⽣⼀次复制来定位他们的服务，并进⾏远程调⽤。</p>
<p>c. 客户端还可以缓存⼀些服务实例信息，所以即使Eureka全挂掉，客户端也是可以定位到服务地址的。</p>
<h2 id="7-限流"><a href="#7-限流" class="headerlink" title="7.限流"></a>7.限流</h2><h3 id="1、http限流：我们使⽤nginx的limitzone来完成："><a href="#1、http限流：我们使⽤nginx的limitzone来完成：" class="headerlink" title="1、http限流：我们使⽤nginx的limitzone来完成："></a>1、http限流：我们使⽤nginx的limitzone来完成：</h3><p> &#x2F;&#x2F;这个表示使⽤ip进⾏限流 zone名称为req_one 分配了10m 空间使⽤漏桶算法 每秒钟允许1个请求</p>
<p>limit_req_zone $binary_remote_addr zone&#x3D;req_one:10m rate&#x3D;1r&#x2F;s; </p>
<p>这边burst表示可以瞬间超过20个请求 由于没有noDelay参数因此需要排队 如果超过这20个那么直接返回503</p>
<p>limit_req zone&#x3D;req_three burst&#x3D;20; </p>
<h3 id="2、dubbo限流：dubbo提供了多个和请求相关的filter：ActiveLimitFilter-ExecuteLimitFilter-TPSLimiterFilter"><a href="#2、dubbo限流：dubbo提供了多个和请求相关的filter：ActiveLimitFilter-ExecuteLimitFilter-TPSLimiterFilter" class="headerlink" title="2、dubbo限流：dubbo提供了多个和请求相关的filter：ActiveLimitFilter ExecuteLimitFilter TPSLimiterFilter"></a>2、dubbo限流：dubbo提供了多个和请求相关的filter：ActiveLimitFilter ExecuteLimitFilter TPSLimiterFilter</h3><p>\1. ActiveLimitFilter： </p>
<p>@Activate(group &#x3D; Constants.CONSUMER, value &#x3D; Constants.ACTIVES_KEY)</p>
<p>作⽤于客户端，主要作⽤是控制客户端⽅法的并发度；</p>
<p>当超过了指定的active值之后该请求将等待前⾯的请求完成【何时结束呢？依赖于该⽅法的timeout 如果没有设置timeout的话可能就是多个请求⼀直被阻塞然后等待随机唤醒。</p>
<p>\2. ExecuteLimitFilter： </p>
<p>@Activate(group &#x3D; Constants.PROVIDER, value &#x3D; Constants.EXECUTES_KEY)</p>
<p>作⽤于服务端，⼀旦超出指定的数⽬直接报错 其实是指在服务端的并⾏度【需要注意这些都是指的是在单台服务上⽽不是整个服务集群】</p>
<p>\3. TPSLimiterFilter： </p>
<p>@Activate(group &#x3D; Constants.PROVIDER, value &#x3D; Constants.TPS_LIMIT_RATE_KEY)</p>
<p>作⽤于服务端，控制⼀段时间内的请求数；默认情况下取得tps.interval字段表示请求间隔 如果⽆法找到则使⽤60s 根据tps字段表示允许调⽤次数。使⽤AtomicInteger表示允许调⽤的次数 每次调⽤减少1次当结果⼩于0之后返回不允许调⽤</p>
<h3 id="3、springcloud限流："><a href="#3、springcloud限流：" class="headerlink" title="3、springcloud限流："></a>3、springcloud限流：</h3><p>1、我们可以通过semaphore.maxConcurrentRequests,coreSize,maxQueueSize和queueSizeRejectionThreshold设置信号量模式下的最⼤并发量、线程池⼤⼩、缓冲区⼤⼩和缓冲区降级阈值。 </p>
<p>#不设置缓冲区，当请求数超过coreSize时直接降级</p>
<p>hystrix.threadpool.userThreadPool.maxQueueSize&#x3D;-1 </p>
<p>#超时时间⼤于我们的timeout接⼝返回时间</p>
<p>hystrix.command.userCommandKey.execution.isolation.thread.timeoutInMilliseconds&#x3D;15000</p>
<p>这个时候我们连续多次请求&#x2F;user&#x2F;command&#x2F;timeout接⼝，在第⼀个请求还没有成功返回时，查看输出⽇志可以发现只有第⼀个请求正常的进⼊到user-service的接⼝中，其它请求会直接返回降级信息。这样我们就实现了对服务请求的限流。</p>
<p>2、漏桶算法：⽔（请求）先进⼊到漏桶⾥，漏桶以⼀定的速度出⽔，当⽔流⼊速度过⼤会直接溢出，可以看出漏桶算法能强⾏限制数据的传输速率。</p>
<p><img src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\4.png" alt="4" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\4.png" class="lozad post-image"></p>
<p>3、令牌桶算法：除了要求能够限制数据的平均传输速率外，还要求允许某种程度的突发传输。这时候漏桶算法可能就不合适了，令牌桶算法更为适合。如图2所示，令牌桶算法的原理是系统会以⼀个恒定的速度往桶⾥放⼊令牌，⽽如果请求需要被处理，则需要先从桶⾥获取⼀个令牌，当桶⾥没有令牌可取时，则拒绝服务。</p>
<p><img src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\6.png" alt="6" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\6.png" class="lozad post-image"></p>
<p>4、redis计数器限流；</p>
<h2 id="8-springcloud核⼼组件及其作⽤，以及springcloud⼯作原理："><a href="#8-springcloud核⼼组件及其作⽤，以及springcloud⼯作原理：" class="headerlink" title="8.springcloud核⼼组件及其作⽤，以及springcloud⼯作原理："></a>8.springcloud核⼼组件及其作⽤，以及springcloud⼯作原理：</h2><p><img src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\5.jpg" alt="5" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\5.jpg" class="lozad post-image"></p>
<p>springcloud由以下⼏个核⼼组件构成：</p>
<p>Eureka：各个服务启动时，Eureka Client都会将服务注册到Eureka Server，并且Eureka Client还可以反过来从EurekaServer拉取注册表，从⽽知道其他服务在哪⾥</p>
<p>Ribbon：服务间发起请求的时候，基于Ribbon做负载均衡，从⼀个服务的多台机器中选择⼀台</p>
<p>Feign：基于Feign的动态代理机制，根据注解和选择的机器，拼接请求URL地址，发起请求</p>
<p>Hystrix：发起请求是通过Hystrix的线程池来⾛的，不同的服务⾛不同的线程池，实现了不同服务调⽤的隔离，避免了服务雪崩的问题（CSF也会通过Hystrix线程池发起请求）</p>
<p>Zuul：如果前端、移动端要调⽤后端系统，统⼀从Zuul⽹关进⼊，由Zuul⽹关转发请求给对应的服务</p>
<h2 id="9-eureka缓存机制："><a href="#9-eureka缓存机制：" class="headerlink" title="9. eureka缓存机制："></a><strong>9.</strong> eureka缓存机制：</h2><p><img src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\8.png" alt="8" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\8.png" class="lozad post-image"></p>
<p>a. 第⼀层缓存：readOnlyCacheMap，本质上是ConcurrentHashMap：这是⼀个JVM的CurrentHashMap只读缓存，这个主要是为了供客户端获取注册信息时使⽤，其缓存更新，依赖于定时器的更新，通过和readWriteCacheMap 的值做对⽐，如果数据不⼀致，则以readWriteCacheMap 的数据为准。readOnlyCacheMap 缓存更新的定时器时间间隔，默认为30秒（AICACHE的readOnlyCache基于相同的机制）</p>
<p>b. 第⼆层缓存：readWriteCacheMap，本质上是Guava缓存：此处存放的是最终的缓存， 当服务下线，过期，注册，状态变更，都会来清除这个缓存⾥⾯的数据。 然后通过CacheLoader进⾏缓存加载，在进readWriteCacheMap.get(key)的时候，⾸先看这个缓存⾥⾯有没有该数据，如果没有则通过CacheLoader的load⽅法去加载，加载成功之后将数据放⼊缓存，同时返回数据。 readWriteCacheMap 缓存过期时间，默认为 180 秒 。</p>
<p>c. 缓存机制：设置了⼀个每30秒执⾏⼀次的定时任务，定时去服务端获取注册信息。获取之后，存⼊本地内存。</p>
<h2 id="10-熔断的原理，以及如何恢复？"><a href="#10-熔断的原理，以及如何恢复？" class="headerlink" title="10. 熔断的原理，以及如何恢复？"></a><strong>10.</strong> 熔断的原理，以及如何恢复？</h2><p><img src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\7.png" alt="7" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\7.png" class="lozad post-image"></p>
<p>a. 服务的健康状况 &#x3D; 请求失败数 &#x2F; 请求总数.</p>
<p>熔断器开关由关闭到打开的状态转换是通过当前服务健康状况和设定阈值⽐较决定的.</p>
<p>i. 当熔断器开关关闭时, 请求被允许通过熔断器. 如果当前健康状况⾼于设定阈值, 开关继续保持关闭. 如果当前健康状况低于设定阈值, 开关则切换为打开状态.</p>
<p>ii. 当熔断器开关打开时, 请求被禁⽌通过.</p>
<p>iii. 当熔断器开关处于打开状态, 经过⼀段时间后, 熔断器会⾃动进⼊半开状态, 这时熔断器只允许⼀个请求通过. 当该请求调⽤成功时, 熔断器恢复到关闭状态. 若该请求失败, 熔断器继续保持打开状态, 接下来的请求被禁⽌通过.熔断器的开关能保证服务调⽤者在调⽤异常服务时, 快速返回结果, 避免⼤量的同步等待. 并且熔断器能在⼀段时间后继续侦测请求执⾏结果, 提供恢复服务调⽤的可能.</p>
<p>（CSF会监控请求过来的请求，请求会被放入请求队列处理，当队列的请求大于设定的阈值时，拒绝请求）</p>
<h2 id="11-服务雪崩？"><a href="#11-服务雪崩？" class="headerlink" title="11. 服务雪崩？"></a><strong>11.</strong> 服务雪崩？</h2><p>遇到过的雪崩：服务重启时，某台机不可用，影响到集群中所有服务，导致大部分请求都不可用（请求队列满，请求被拒绝）</p>
<p>可能原因：大量慢SQL的查询堆积，占用了CSF服务导致线程无法释放，最后影响到所有服务</p>
<p><img src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\10.png" alt="10" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="C:\Users\dave_cc\Downloads\4.2、微服务—SpringCloud(20题)\10.png" class="lozad post-image"></p>
<p><strong>a.</strong> 简介：服务雪崩效应是⼀种因 服务提供者 的不可⽤导致 服务调⽤者 的不可⽤,并将不可⽤ 逐渐放⼤ 的过程.</p>
<p><strong>b.</strong> 形成原因：</p>
<p>i. 服务提供者不可⽤</p>
<p>ii. 重试加⼤流量</p>
<p>iii. 服务调⽤者不可⽤</p>
<p><strong>c.</strong> 采⽤策略：</p>
<p>i. 流量控制</p>
<p>ii. 改进缓存模式</p>
<p>iii. 服务⾃动扩容</p>
<p>iv. 服务调⽤者降级服务</p>
<h2 id="12-接⼝限流⽅法？"><a href="#12-接⼝限流⽅法？" class="headerlink" title="12. 接⼝限流⽅法？"></a><strong>12.</strong> 接⼝限流⽅法？</h2><p>a. 限制 总并发数（⽐如 数据库连接池、线程池）</p>
<p>b. 限制 瞬时并发数（如 nginx 的 limit_conn 模块，⽤来限制 瞬时并发连接数）</p>
<p>c. 限制 时间窗⼝内的平均速率（如 Guava 的 RateLimiter、nginx 的 limit_req模块，限制每秒的平均速率）</p>
<p>d. 限制 远程接⼝ 调⽤速率</p>
<p>e. 限制 MQ 的消费速率</p>
<p>f. 可以根据 ⽹络连接数、⽹络流量、CPU 或 内存负载 等来限流</p>

  </div>
  <div>
    
      <div 
        class="post-note note-warning copyright" 
        style="margin-top: 42px">
        <p>
          <span style="font-weight: bold;">作者：</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="/java4u/about">
            Zhao Xin
          </a>
        </p>
        <p>
          <span style="font-weight: bold;">文章链接：</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="https://zxtc123.github.io/java4u/2021/04/01/interiew_springcloud/">
            https://zxtc123.github.io/java4u/2021/04/01/interiew_springcloud/
          </a>
        </p>
        <p><span style="font-weight: bold;">版权声明：</span>本博客所有文章除特别声明外，均采用<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0 协议</a>。转载请注明出处！</p>
      </div>
    
  </div>
</article>
<div class="nav">
  
    <div class="nav-item-prev">
      <a 
        href="/java4u/2021/04/22/OAuth/" 
        class="nav-link">
        <i class="iconfont icon-left nav-prev-icon"></i>
        <div>
          <div class="nav-label">上一篇</div>
          
            <div class="nav-title">OAuth </div>
          
        </div>
      </a>
    </div>
  
  
    <div class="nav-item-next">
      <a 
        href="/java4u/2021/03/10/design_pattern/" 
        class="nav-link">
        <div>
          <div class="nav-label">下一篇</div>
          
            <div class="nav-title">设计模式 </div>
          
        </div>
        <i class="iconfont icon-right nav-next-icon"></i>
      </a>
    </div>
  
</div>

<div 
  class="card card-content toc-card" 
  id="mobiletoc">
  <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>目录
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E2%80%93springcloud"><span class="toc-text">微服务–springcloud</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-springcloud%E5%92%8Cdubbo%E6%9C%89%E5%93%AA%E4%BA%9B%E5%8C%BA%E5%88%AB"><span class="toc-text">1.springcloud和dubbo有哪些区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7"><span class="toc-text">2. 什么是服务熔断，什么是服务降级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-text">3. 微服务的优缺点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%97%E4%B8%BE%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="toc-text">4. 列举微服务技术栈</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-eureka%E5%92%8Czookeeper%E9%83%BD%E5%8F%AF%E4%BB%A5%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0%E5%8A%9F%E8%83%BD%EF%BC%8C%E4%BB%96%E4%BB%AC%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">5. eureka和zookeeper都可以提供服务的注册与发现功能，他们的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-text">6. eureka服务注册与发现原理：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E9%99%90%E6%B5%81"><span class="toc-text">7.限流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81http%E9%99%90%E6%B5%81%EF%BC%9A%E6%88%91%E4%BB%AC%E4%BD%BF%E2%BD%A4nginx%E7%9A%84limitzone%E6%9D%A5%E5%AE%8C%E6%88%90%EF%BC%9A"><span class="toc-text">1、http限流：我们使⽤nginx的limitzone来完成：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81dubbo%E9%99%90%E6%B5%81%EF%BC%9Adubbo%E6%8F%90%E4%BE%9B%E4%BA%86%E5%A4%9A%E4%B8%AA%E5%92%8C%E8%AF%B7%E6%B1%82%E7%9B%B8%E5%85%B3%E7%9A%84filter%EF%BC%9AActiveLimitFilter-ExecuteLimitFilter-TPSLimiterFilter"><span class="toc-text">2、dubbo限流：dubbo提供了多个和请求相关的filter：ActiveLimitFilter ExecuteLimitFilter TPSLimiterFilter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81springcloud%E9%99%90%E6%B5%81%EF%BC%9A"><span class="toc-text">3、springcloud限流：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-springcloud%E6%A0%B8%E2%BC%BC%E7%BB%84%E4%BB%B6%E5%8F%8A%E5%85%B6%E4%BD%9C%E2%BD%A4%EF%BC%8C%E4%BB%A5%E5%8F%8Aspringcloud%E2%BC%AF%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-text">8.springcloud核⼼组件及其作⽤，以及springcloud⼯作原理：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-eureka%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%EF%BC%9A"><span class="toc-text">9. eureka缓存机制：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E7%86%94%E6%96%AD%E7%9A%84%E5%8E%9F%E7%90%86%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E6%81%A2%E5%A4%8D%EF%BC%9F"><span class="toc-text">10. 熔断的原理，以及如何恢复？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%9C%8D%E5%8A%A1%E9%9B%AA%E5%B4%A9%EF%BC%9F"><span class="toc-text">11. 服务雪崩？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E6%8E%A5%E2%BC%9D%E9%99%90%E6%B5%81%E2%BD%85%E6%B3%95%EF%BC%9F"><span class="toc-text">12. 接⼝限流⽅法？</span></a></li></ol></li></ol>
</div></main>
            <aside class="left-column">
              
              <div class="card card-author">
                
  <img 
    src="/java4u/img/1.e3a1f41f.gif" 
    class="author-img"
    width="88"
    height="88"
    alt="author avatar">

<p class="author-name">Zhao Xin</p>
<p class="author-description">5年工作经验，不秃头的java萌新。</p>
<div class="author-message">
  <a 
    class="author-posts-count" 
    href="/java4u/archives">
    <span>112</span>
    <span>文章</span>
  </a>
  <a 
    class="author-categories-count" 
    href="/java4u/categories">
    <span>24</span>
    <span>分类</span>
  </a>
  <a 
    class="author-tags-count" 
    href="/java4u/tags">
    <span>31</span>
    <span>标签</span>
  </a>
</div>

              </div>
               <div class="sticky-tablet">
  
  
    <article class="display-when-two-columns spacer">
      <div class="card card-content toc-card">
        <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>目录
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E2%80%93springcloud"><span class="toc-text">微服务–springcloud</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-springcloud%E5%92%8Cdubbo%E6%9C%89%E5%93%AA%E4%BA%9B%E5%8C%BA%E5%88%AB"><span class="toc-text">1.springcloud和dubbo有哪些区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7"><span class="toc-text">2. 什么是服务熔断，什么是服务降级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-text">3. 微服务的优缺点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%97%E4%B8%BE%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="toc-text">4. 列举微服务技术栈</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-eureka%E5%92%8Czookeeper%E9%83%BD%E5%8F%AF%E4%BB%A5%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0%E5%8A%9F%E8%83%BD%EF%BC%8C%E4%BB%96%E4%BB%AC%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">5. eureka和zookeeper都可以提供服务的注册与发现功能，他们的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-text">6. eureka服务注册与发现原理：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E9%99%90%E6%B5%81"><span class="toc-text">7.限流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81http%E9%99%90%E6%B5%81%EF%BC%9A%E6%88%91%E4%BB%AC%E4%BD%BF%E2%BD%A4nginx%E7%9A%84limitzone%E6%9D%A5%E5%AE%8C%E6%88%90%EF%BC%9A"><span class="toc-text">1、http限流：我们使⽤nginx的limitzone来完成：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81dubbo%E9%99%90%E6%B5%81%EF%BC%9Adubbo%E6%8F%90%E4%BE%9B%E4%BA%86%E5%A4%9A%E4%B8%AA%E5%92%8C%E8%AF%B7%E6%B1%82%E7%9B%B8%E5%85%B3%E7%9A%84filter%EF%BC%9AActiveLimitFilter-ExecuteLimitFilter-TPSLimiterFilter"><span class="toc-text">2、dubbo限流：dubbo提供了多个和请求相关的filter：ActiveLimitFilter ExecuteLimitFilter TPSLimiterFilter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81springcloud%E9%99%90%E6%B5%81%EF%BC%9A"><span class="toc-text">3、springcloud限流：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-springcloud%E6%A0%B8%E2%BC%BC%E7%BB%84%E4%BB%B6%E5%8F%8A%E5%85%B6%E4%BD%9C%E2%BD%A4%EF%BC%8C%E4%BB%A5%E5%8F%8Aspringcloud%E2%BC%AF%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-text">8.springcloud核⼼组件及其作⽤，以及springcloud⼯作原理：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-eureka%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%EF%BC%9A"><span class="toc-text">9. eureka缓存机制：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E7%86%94%E6%96%AD%E7%9A%84%E5%8E%9F%E7%90%86%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E6%81%A2%E5%A4%8D%EF%BC%9F"><span class="toc-text">10. 熔断的原理，以及如何恢复？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%9C%8D%E5%8A%A1%E9%9B%AA%E5%B4%A9%EF%BC%9F"><span class="toc-text">11. 服务雪崩？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E6%8E%A5%E2%BC%9D%E9%99%90%E6%B5%81%E2%BD%85%E6%B3%95%EF%BC%9F"><span class="toc-text">12. 接⼝限流⽅法？</span></a></li></ol></li></ol>
      </div>
    </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header">
    <i 
      class="iconfont icon-fenlei" 
      style="padding-right: 2px;">
    </i>分类
  </div>
  <div class="categories-list">
    
      <a href="/java4u/categories/%E7%BD%91%E7%BB%9C/">
        <div class="categories-list-item">
          网络
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/webservice/">
        <div class="categories-list-item">
          webservice
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">
        <div class="categories-list-item">
          数据结构与算法
          <span class="categories-list-item-badge">55</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E5%8A%A0%E5%AF%86%E8%A7%A3%E7%A0%81/">
        <div class="categories-list-item">
          加密解码
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E7%BA%BF%E7%A8%8B%E6%B1%A0/">
        <div class="categories-list-item">
          线程池
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E9%9D%A2%E8%AF%95/">
        <div class="categories-list-item">
          面试
          <span class="categories-list-item-badge">7</span>
        </div>
      </a>
    
      <a href="/java4u/categories/security/">
        <div class="categories-list-item">
          security
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E5%88%86%E5%B8%83%E5%BC%8F/">
        <div class="categories-list-item">
          分布式
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/JVM/">
        <div class="categories-list-item">
          JVM
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E6%A1%86%E6%9E%B6/">
        <div class="categories-list-item">
          框架
          <span class="categories-list-item-badge">5</span>
        </div>
      </a>
    
      <a href="/java4u/categories/SQL/">
        <div class="categories-list-item">
          SQL
          <span class="categories-list-item-badge">20</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E8%BF%9B%E7%A8%8B/">
        <div class="categories-list-item">
          进程
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">
        <div class="categories-list-item">
          中间件
          <span class="categories-list-item-badge">3</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E6%96%87%E6%A1%A3%E6%80%BB%E7%BB%93/">
        <div class="categories-list-item">
          文档总结
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4/">
        <div class="categories-list-item">
          微服务保护
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E7%BC%93%E5%AD%98/">
        <div class="categories-list-item">
          缓存
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E4%BA%8B%E5%8A%A1/">
        <div class="categories-list-item">
          事务
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E5%AE%B9%E5%99%A8/">
        <div class="categories-list-item">
          容器
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E8%A7%84%E8%8C%83/">
        <div class="categories-list-item">
          规范
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E8%AF%AD%E8%A8%80/">
        <div class="categories-list-item">
          语言
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">
        <div class="categories-list-item">
          编程语言
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/java4u/categories/linux/">
        <div class="categories-list-item">
          linux
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%9C%E7%B4%A2/">
        <div class="categories-list-item">
          分布式搜索
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/java4u/categories/AI/">
        <div class="categories-list-item">
          AI
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header">
    <i 
      class="iconfont icon-biaoqian" 
      style="padding-right: 2px;">
    </i>热门标签
  </div>
  <div class="tags-list">
    
      <a 
        href="/java4u/tags/leetcode/" 
        title="leetcode">
        <div class="tags-list-item">leetcode</div>
      </a>
    
      <a 
        href="/java4u/tags/%E5%AD%A6%E4%B9%A0/" 
        title="学习">
        <div class="tags-list-item">学习</div>
      </a>
    
      <a 
        href="/java4u/tags/%E6%95%B0%E7%BB%84/" 
        title="数组">
        <div class="tags-list-item">数组</div>
      </a>
    
      <a 
        href="/java4u/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" 
        title="动态规划">
        <div class="tags-list-item">动态规划</div>
      </a>
    
      <a 
        href="/java4u/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" 
        title="二叉树">
        <div class="tags-list-item">二叉树</div>
      </a>
    
      <a 
        href="/java4u/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" 
        title="字符串">
        <div class="tags-list-item">字符串</div>
      </a>
    
      <a 
        href="/java4u/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/" 
        title="位运算">
        <div class="tags-list-item">位运算</div>
      </a>
    
      <a 
        href="/java4u/tags/%E4%BA%8C%E5%88%86%E6%B3%95/" 
        title="二分法">
        <div class="tags-list-item">二分法</div>
      </a>
    
      <a 
        href="/java4u/tags/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/" 
        title="滑动窗口">
        <div class="tags-list-item">滑动窗口</div>
      </a>
    
      <a 
        href="/java4u/tags/%E9%93%BE%E8%A1%A8/" 
        title="链表">
        <div class="tags-list-item">链表</div>
      </a>
    
      <a 
        href="/java4u/tags/%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/" 
        title="参考资料">
        <div class="tags-list-item">参考资料</div>
      </a>
    
      <a 
        href="/java4u/tags/django/" 
        title="django">
        <div class="tags-list-item">django</div>
      </a>
    
      <a 
        href="/java4u/tags/%E6%BA%90%E7%A0%81/" 
        title="源码">
        <div class="tags-list-item">源码</div>
      </a>
    
      <a 
        href="/java4u/tags/kubernetes/" 
        title="kubernetes">
        <div class="tags-list-item">kubernetes</div>
      </a>
    
      <a 
        href="/java4u/tags/spring/" 
        title="spring">
        <div class="tags-list-item">spring</div>
      </a>
    
      <a 
        href="/java4u/tags/python/" 
        title="python">
        <div class="tags-list-item">python</div>
      </a>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
            <aside class="right-column">
              <div class="sticky-widescreen">
  
  
    <article class="card card-content toc-card">
      <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>目录
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E2%80%93springcloud"><span class="toc-text">微服务–springcloud</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-springcloud%E5%92%8Cdubbo%E6%9C%89%E5%93%AA%E4%BA%9B%E5%8C%BA%E5%88%AB"><span class="toc-text">1.springcloud和dubbo有哪些区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7"><span class="toc-text">2. 什么是服务熔断，什么是服务降级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-text">3. 微服务的优缺点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%97%E4%B8%BE%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="toc-text">4. 列举微服务技术栈</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-eureka%E5%92%8Czookeeper%E9%83%BD%E5%8F%AF%E4%BB%A5%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0%E5%8A%9F%E8%83%BD%EF%BC%8C%E4%BB%96%E4%BB%AC%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">5. eureka和zookeeper都可以提供服务的注册与发现功能，他们的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-text">6. eureka服务注册与发现原理：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E9%99%90%E6%B5%81"><span class="toc-text">7.限流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81http%E9%99%90%E6%B5%81%EF%BC%9A%E6%88%91%E4%BB%AC%E4%BD%BF%E2%BD%A4nginx%E7%9A%84limitzone%E6%9D%A5%E5%AE%8C%E6%88%90%EF%BC%9A"><span class="toc-text">1、http限流：我们使⽤nginx的limitzone来完成：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81dubbo%E9%99%90%E6%B5%81%EF%BC%9Adubbo%E6%8F%90%E4%BE%9B%E4%BA%86%E5%A4%9A%E4%B8%AA%E5%92%8C%E8%AF%B7%E6%B1%82%E7%9B%B8%E5%85%B3%E7%9A%84filter%EF%BC%9AActiveLimitFilter-ExecuteLimitFilter-TPSLimiterFilter"><span class="toc-text">2、dubbo限流：dubbo提供了多个和请求相关的filter：ActiveLimitFilter ExecuteLimitFilter TPSLimiterFilter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81springcloud%E9%99%90%E6%B5%81%EF%BC%9A"><span class="toc-text">3、springcloud限流：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-springcloud%E6%A0%B8%E2%BC%BC%E7%BB%84%E4%BB%B6%E5%8F%8A%E5%85%B6%E4%BD%9C%E2%BD%A4%EF%BC%8C%E4%BB%A5%E5%8F%8Aspringcloud%E2%BC%AF%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-text">8.springcloud核⼼组件及其作⽤，以及springcloud⼯作原理：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-eureka%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%EF%BC%9A"><span class="toc-text">9. eureka缓存机制：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E7%86%94%E6%96%AD%E7%9A%84%E5%8E%9F%E7%90%86%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E6%81%A2%E5%A4%8D%EF%BC%9F"><span class="toc-text">10. 熔断的原理，以及如何恢复？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%9C%8D%E5%8A%A1%E9%9B%AA%E5%B4%A9%EF%BC%9F"><span class="toc-text">11. 服务雪崩？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E6%8E%A5%E2%BC%9D%E9%99%90%E6%B5%81%E2%BD%85%E6%B3%95%EF%BC%9F"><span class="toc-text">12. 接⼝限流⽅法？</span></a></li></ol></li></ol>
    </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header">
    <i 
      class="iconfont icon-wenzhang_huaban" 
      style="padding-right: 2px;">
    </i>最近文章
  </div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2024-03-10</div>
        <a href="/java4u/2024/03/10/MQ/"><div class="recent-posts-item-content">MQ</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2024-03-10</div>
        <a href="/java4u/2024/03/10/2.jvm/"><div class="recent-posts-item-content">JVM</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2023-06-04</div>
        <a href="/java4u/2023/06/04/RUST_tutorial2/"><div class="recent-posts-item-content">RUST入门（二）</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2023-05-16</div>
        <a href="/java4u/2023/05/16/RUST_tutorial1/"><div class="recent-posts-item-content">RUST入门</div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
          </div>
        </div>
      </div>
    </div>
     
    <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>
          Copyright ©
          
            2020
          
          
                - 
                2024
          
        </span>
        &nbsp;
        <a 
          href="/java4u/" 
          class="footer-link">
          Snail
        </a>
      </div>
    </div>

    
      <div class="footer-dsc">
        
          Powered by
          <a 
            href="https://hexo.io/" 
            class="footer-link" 
            target="_blank" 
            rel="nofollow noopener noreferrer">
            &nbsp;Hexo
          </a>
        
        
          <span>&nbsp;|&nbsp;</span>
        
        
          Theme -
          <a 
            href="https://github.com/theme-kaze" 
            class="footer-link" 
            target="_blank"
            rel="nofollow noopener noreferrer">
            &nbsp;Kaze
          </a>
        
      </div>
    
    
    
    
</footer>
 
    
  <a 
    role="button" 
    id="scrollbutton" 
    class="basebutton" 
    aria-label="回到顶部">
    <i class="iconfont icon-arrowleft button-icon"></i>
  </a>

<a 
  role="button" 
  id="menubutton"
  aria-label="menu button"
  class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a 
  role="button" 
  id="popbutton" 
  class="basebutton" 
  aria-label="控制中心">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a 
  role="button" 
  id="darkbutton" 
  class="basebutton darkwidget" 
  aria-label="夜色模式">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a 
  role="button" 
  id="searchbutton" 
  class="basebutton searchwidget" 
  aria-label="搜索">
  <i class="iconfont icon-search button-icon"></i>
</a> 
     
     
      
 
     
     
      <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img')
    var i
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a')
      wrapper.setAttribute('href', img[i].getAttribute('data-src'))
      wrapper.setAttribute('aria-label', 'illustration')
      wrapper.style.cssText =
        'width: 100%; display: flex; justify-content: center;'
      if (img[i].alt) wrapper.dataset.caption = img[i].alt
      wrapper.dataset.nolink = true
      img[i].before(wrapper)
      wrapper.append(img[i])
      var divWrap = document.createElement('div')
      divWrap.classList.add('gallery')
      wrapper.before(divWrap)
      divWrap.append(wrapper)
    }
    baguetteBox.run('.gallery')
  }
</script>
<script>
  loadScript(
    "/java4u/js/lib/lightbox/baguetteBox.min.js",
    addImgLayout
  )
</script>
 
     
     
    <script src="/java4u/js/main.js"></script> 
     
    
      <script>
        var addLazyload = function () {
          var observer = lozad('.lozad', {
            load: function (el) {
              el.srcset = el.getAttribute('data-src')
            },
            loaded: function (el) {
              el.classList.add('loaded')
            },
          })
          observer.observe()
        }
      </script>
      <script>
        loadScript('/java4u/js/lib/lozad.min.js', addLazyload)
      </script>
     
    
    
      <script>
        setTimeout(() => {localSearch("search.json")}, 0)
      </script>
    
  </body>
</html>
